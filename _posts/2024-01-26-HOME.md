---
title: HOME
date: 2024-01-12 22:00:00 +0900
categories: [ JAVA, JSP]
tags: [JAVA, JSP]
math: true
mermaid: true

---


JSPë¡œ viewë¥¼ ë§Œë“¤ë ¤ê³  í•œë‹¤. 


**ì»¨íŠ¸ë¡¤ëŸ¬**

```java

@GetMapping("/home")
    public String home() {
        return "home";
    }
```
/homeìœ¼ë¡œ ì´ë™í•˜ë©´  hoem.jspë¡œ ì´ë™í•œë‹¤.

**í™ˆí™”ë©´**

``` java
<%@ page language="java" contentType="text/html; charset=UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %> //jstlì—ì„œ ì‚¬ìš©í•˜ëŠ” íƒœê·¸ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ ì„ ì–¸
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ğŸ›’ TechComputeMall</title>
</head>
<body>
<%@ include file="/WEB-INF/views/menu.jsp" %>
<div style="text-align:center">
    <img src="static/images/computer.png" alt="computer1">

<h1>WELCOME</h1>

</div>
</div>
</body>
</html>
```

**ë©”ë‰´**

```java
<%@ page language="java" contentType="text/html; charset=UTF-8"
         pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ğŸ›’ TechComputeMall</title>
    <link rel="stylesheet" href="<c:url value='/css/menu.css'/>">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css"/>
</head>
<body>
<div id="menu">
    <ul>
        <li id="logo"><a href="<c:url value='/home'/>">TechComputeMall</a></li>
        <li><a href="<c:url value='/item/itemsPage'/>">ìƒí’ˆë³´ëŸ¬ê°€ê¸°</a></li>
        <li id="login-logout">
            <a href="/loginForm" onclick="toggleLoginStatus()">
                <span id="login-text"></span>
            </a>
            <span id="user-name" style="display: none;" >
                <span id="user-name-value"></span>ë‹˜
            </span>
        </li>
        <li id="admin" style="display: none;">
            <a href="/itemUpload">ê´€ë¦¬ìí˜ì´ì§€</a>
        </li>
        <li><a href=""><i class="fa fa-search"></i></a></li>
    </ul>
</div>



<script>

    // access_token ê°’ì„ ê°€ì ¸ì˜¤ê¸°
    const access_token = localStorage.getItem('access_token');
    console.log("access_token= " + access_token);

    // í† í°ì´ ìˆë‹¤ë©´ ë””ì½”ë”©
    if (access_token) {
        const decodedToken = parseJwt(access_token);

        // í´ë ˆì„ì—ì„œ ì›í•˜ëŠ” ì •ë³´ ì¶”ì¶œ
        const username = decodedToken.name;
        const role = decodedToken.roles;
        console.log('ì‚¬ìš©ì ì´ë¦„:', username);
        console.log('ì—­í• ',role)


        //  ì‚¬ìš©ì ì´ë¦„ì´ ìˆì„ ë•Œë§Œ ë³´ì´ë„ë¡ ë³€ê²½
        if (username) {
            document.getElementById('login-text').innerText = 'ë¡œê·¸ì•„ì›ƒ';
            document.getElementById('user-name').style.display = 'inline';
            document.getElementById('user-name-value').innerText = username;
            //  ì‚¬ìš©ìê°€ adminì¼ ë•Œë§Œ ìƒí’ˆë“±ë¡í•˜ê¸° ë©”ë‰´ í‘œì‹œ
            if (role.includes('ADMIN')) {
                document.getElementById('admin').style.display = 'inline';
            }
        }
    } else {
        console.log('í† í°ì´ ì—†ìŠµë‹ˆë‹¤.');
        document.getElementById('login-text').innerText = 'ë¡œê·¸ì¸';

    }

    // JWT í† í° ë””ì½”ë”© í•¨ìˆ˜
    function parseJwt(token) {
        const base64Url = token.split('.')[1];
        const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
        const jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
        }).join(''));

        return JSON.parse(jsonPayload);
    }


    //  ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ í† ê¸€ í•¨ìˆ˜
    function toggleLoginStatus() {
        if (access_token) {
            localStorage.removeItem('access_token');
            console.log('ë¡œê·¸ì•„ì›ƒ');
        } else {
            //
            console.log('ë¡œê·¸ì¸');
        }

        // í˜ì´ì§€ ë¦¬ë¡œë”©
        location.reload();
    }
</script>

</body>
</html>

```
scriptë¥¼ ì‚¬ìš©í•´ì„œ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì„ ì–¸í•´ì£¼ì—ˆë‹¤.

ë¡œê·¸ì¸í–ˆì„ë•Œ localStorageì— í† í°ì„ ì €ì¥í•´ë‘ì—ˆë‹¤.

í† í°ì„ ê°€ì ¸ì™€ì„œ ë””ì½”ë”©ì„ í•œë’¤ í† í°ì— ì €ì¥í•´ë‘ì—ˆë˜ ì´ë¦„ê³¼ ì—­í• ì„ ì¶”ì¶œí•˜ì˜€ë‹¤.

ê·¸ë˜ì„œ roleì´ adminì´ ì•„ë‹ë•Œ ê´€ë¦¬ì í˜ì´ì§€ê°€ ì•ˆë³´ì´ê²Œ ìˆ¨ê²¨ë‘ì—ˆë‹¤.

ë¡œê·¸ì¸ì´ ì„±ê³µì ìœ¼ë¡œ ì´ë£¨ì–´ì§€ë©´ í† í°ì—ì„œ ì´ë¦„ì„ ì¶”ì¶œí•´ì„œ ë³´ì¼ ìˆ˜ ìˆê²Œ í•´ë‘ì—ˆë‹¤.

localStorageì— accessTokenì´ ì—†ì„ ë•ŒëŠ” ë¡œê·¸ì¸ì´ ë³´ì´ê²Œ 

ìˆì„ë•ŒëŠ” localStorage.removeItem('access_token')ë¥¼ ì‚¬ìš©í•´ì„œ ë¡œê·¸ì•„ì›ƒì´ ê°€ëŠ¥í•˜ê²Œ í–ˆë‹¤.



![image](https://github.com/ararp1006/Algorithm/assets/130068083/a00454e8-69b5-4c86-9c56-edb660f49bef)

![image](https://github.com/ararp1006/Algorithm/assets/130068083/67813d34-9375-4bb5-906b-47fd78cbe1f2)



 