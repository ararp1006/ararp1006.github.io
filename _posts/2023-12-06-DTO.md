---
title: DTO
date: 2023-12-06 23:00:00 +0900
categories: [ğŸŒ¼Spring,Spring MVC]
tags: [Spring MVC]
math: true
mermaid: true

---


## **DTOë€?**

DTO(Data Transfer Object)ë€ ê³„ì¸µê°„ ë°ì´í„° êµí™˜ì„ ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ê°ì²´(Java Beans)ì´ë‹¤.
<hr>

## **DTOê°€ í•„ìš”í•œ ì´ìœ **
- í´ë¼ì´ì–¸íŠ¸ì˜ Request Bodyë¥¼ í•˜ë‚˜ì˜ ê°ì²´ë¡œ ëª¨ë‘ ì „ë‹¬ë°›ì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì½”ë“œ ìì²´ê°€ ê°„ê²°í•´ì§„ë‹¤.
- Request Bodyì˜ ë°ì´í„° ìœ íš¨ì„±(Validation) ê²€ì¦ì´ ë‹¨ìˆœí•´ì§„ë‹¤.
- ë„ë©”ì¸ Modelì„ ìº¡ìŠí™”í•˜ê³ , UIí™”ë©´ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë°ì´í„°ë§Œ ì„ íƒì ìœ¼ë¡œ ë³´ë‚¼ ìˆ˜ ìˆë‹¤.

```java
@Getter
@Setter
public class MemberPostDto {
    private String email;
    private String name;
    private String phone;
}
```

```java
@PostMapping //íšŒì›ë“±ë¡ ì»¨íŠ¸ë¡¤ëŸ¬
    public ResponseEntity postMember(@RequestBody MemberPostDto memberPostDto){
        return new ResponseEntity<>(memberPostDto, HttpStatus.CREATED);
    }
```
<hr>

## **DTO ì‚¬ìš©ë²•**

- JSON í˜•ì‹ì˜ Request Bodyë¥¼ ì „ë‹¬ë°›ê¸° ìœ„í•´ì„œëŠ” DTO ê°ì²´ì— `@RequestBody` ì• ë„ˆí…Œì´ì…˜ì„ ë¶™ì—¬ì•¼ í•œë‹¤.

- Response Bodyë¥¼ JSON í˜•ì‹ìœ¼ë¡œ ì „ë‹¬í•˜ê¸° ìœ„í•´ì„œëŠ” ê°ì²´ì™€ í…Œì´ë¸”ê°„ íŒ¨ëŸ¬ë‹¤ì„ ë¶ˆì¼ì¹˜ê°€ ë°œìƒí•œë‹¤

 - Response Bodyë¥¼ JSON í˜•ì‹ìœ¼ë¡œ ì „ë‹¬í•˜ê¸° ìœ„í•´ì„œëŠ”

   `@ResponseBody`ì• ë„ˆí…Œì´ì…˜ì„ ë©”ì„œë“œ ì•ì— ë¶™ì—¬ ì£¼ì–´ì•¼ í•˜ì§€ë§Œ 

   ResponseEntity ê°ì²´ë¥¼ ë¦¬í„´ ê°’ìœ¼ë¡œ ì‚¬ìš©í•  ê²½ìš° `@ResponseBody`ë¥¼ ìƒëµí•  ìˆ˜ ìˆë‹¤.

- í´ë¼ì´ì–¸íŠ¸ ìª½ì—ì„œ JSON í˜•ì‹ì˜ ë°ì´í„°ë¥¼ ì„œë²„ ìª½ìœ¼ë¡œ ì „ì†¡í•˜ë©´ 

    ì„œë²„ ìª½ì˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì „ë‹¬ë°›ì€ **[JSON]() í˜•ì‹ì˜ ë°ì´í„°ë¥¼ DTO ê°™ì€ Javaì˜ ê°ì²´ë¡œ ë³€í™˜í•˜ëŠ”ë°** 

    **ì´ë¥¼ ì—­ì§ë ¬í™”(Deserialization)**ì´ë¼ê³  í•œë‹¤.

- ì„œë²„ ìª½ì—ì„œ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì‘ë‹µ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ìœ„í•´ì„œ 

   DTO ê°™ì€ **Javaì˜ ê°ì²´ë¥¼ JSON í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ê²ƒì„ ì§ë ¬í™”(Serialization)**ë¼ê³  í•œë‹¤.

<hr>

**JSON ì§ë ¬í™”(Serialization): Java ê°ì²´ â†’ JSON**

**JSON ì—­ì§ë ¬í™”(Deserialization): JSON â†’ Java ê°ì²´**

<hr>

## **DTO í´ë˜ìŠ¤ì˜ ë‹¨ì **

Controller í´ë˜ìŠ¤ì— í•´ë‹¹í•˜ëŠ” DTO í´ë˜ìŠ¤ë¥¼ ì¶”ê°€ì ìœ¼ë¡œ ì‘ì„±í•´ì•¼ í•¨

ê²°ê³¼ì ìœ¼ë¡œ **Controller í´ë˜ìŠ¤ê°€ ëŠ˜ì–´ë‚¨ì— ë”°ë¼ DTO í´ë˜ìŠ¤ê°€ ëŠ˜ì–´ë‚¨**

<hr>

## DTO ìœ íš¨ì„±ê²€ì¦

- í”„ë¡ íŠ¸ì—”ë“œ ìª½ì—ì„œ ìœ íš¨ì„± ê²€ì¦ì„ ì§„í–‰í–ˆë‹¤ í•˜ë”ë¼ë„ ì„œë²„ ìª½ì—ì„œ ì¶”ê°€ì ìœ¼ë¡œ ìœ íš¨ì„± ê²€ì¦ì„ ë°˜ë“œì‹œ ì§„í–‰í•´ì•¼

<hr>

### ì˜ì¡´ì„± ì¶”ê°€

```java
dependencies {
	implementation 'org.springframework.boot:spring-boot-starter-validation'
	...
	...
}
```

### ìœ íš¨ì„± ê²€ì¦ì„ ìœ„í•œ ì–´ë…¸í…Œì´ì…˜

```java
public class MemberPostDto {//íšŒì›ë“±ë¡ ì»¨íŠ¸ë¡¤ëŸ¬
    @NotBlank
    @Email
    private String email;

    @NotBlank(message = "ì´ë¦„ì€ ê³µë°±ì´ ì•„ë‹ˆì–´ì•¼ í•©ë‹ˆë‹¤.")
    private String name;

    @Pattern(regexp = "^010-\\d{3,4}-\\d{4}$",
            message = "íœ´ëŒ€í° ë²ˆí˜¸ëŠ” 010ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” 11ìë¦¬ ìˆ«ìì™€ '-'ë¡œ êµ¬ì„±ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.")
    private String phone;
```

- **[Jakarta Bean Validation]()**ì˜ ì• ë„ˆí…Œì´ì…˜ì„ ì´ìš©í•˜ë©´ Controller ë¡œì§ì—ì„œ ìœ íš¨ì„± ê²€ì¦ ë¡œì§ì„ ë¶„ë¦¬ ê°€ëŠ¥

### Dto ìœ íš¨ì„± ê²€ì¦ ë¡œì§ ì‹¤í–‰

- Springì—ì„œ ì§€ì›í•˜ëŠ” `@Validated` ì• ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•˜ë©´  ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°(Query Parameter ë˜ëŠ” Query String) ë°  `@Pathvariable`ì— ëŒ€í•œ ìœ íš¨ì„± ê²€ì¦ì„ ì§„í–‰í•  ìˆ˜ ìˆìŒ
    
- ìœ íš¨ì„± ê²€ì¦ ì• ë„ˆí…Œì´ì…˜ì´ ì¶”ê°€ëœ DTO í´ë˜ìŠ¤ì—ì„œ ìœ íš¨ì„± ê²€ì¦ ë¡œì§ì´ ì‹¤í–‰ë˜ê²Œ í•˜ê¸° ìœ„í•´ì„œëŠ”
    
    DTO í´ë˜ìŠ¤ì— `@Valid` ì• ë„ˆí…Œì´ì…˜ì„ ì¶”ê°€
    

```java
@RestController
@RequestMapping("/v1/members")
@Validated   // ìœ íš¨ì„±
public class MemberController {

@PatchMapping("/{member-id}")
    public ResponseEntity patchMember
(@PathVariable("member-id") @Min(1) long memberId,
        @Valid//ìœ íš¨ì„± @RequestBody MemberPatchDto memberPatchDto) {
        memberPatchDto.setMemberId(memberId);

        //need Business logic

        return new ResponseEntity<>(memberPatchDto, HttpStatus.OK);
    }
}
```